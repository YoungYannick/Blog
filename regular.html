<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Regular Expression Generator - YoungYannick's Blog</title>
    <meta name="author" content="YoungYannick" />
    <meta name="description" content="YoungYannick's Blog - Regular Expression Generator Tool" />
    <meta name="keywords" content="YoungYannick,Blog,Blog,Regular Expression,Regex Generator" />
    <link rel="icon" href="/images/Yannick_64.ico" />
    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&family=Quicksand:wght@500&display=swap" rel="stylesheet">
    <link href="/css/toastr.min.css" rel="stylesheet" />
    <link href="/css/navbar.css" rel="stylesheet" />
    <link href="/css/theme.css" rel="stylesheet" />
    <link rel="stylesheet" href="/css/tools-bubble.css">
    <script src="/js/tools-bubble.js"></script>
    <script src="/js/theme.js"></script>
    <script src="/js/filter-module.js"></script>
    <script src="/js/jquery-3.7.1.js"></script>
    <script src="/js/bootstrap.bundle.min.js"></script>
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/toastr.min.js"></script>
    <script src="/js/navbar.js"></script>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        min-height: 100vh;
        font-family: 'Nunito', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background: var(--light-bg); 
        position: relative;
        overflow-x: hidden;
        padding: 1rem;
        color: var(--light-text); 
    }

    body::before,
    body::after {
        content: '';
        position: absolute;
        width: 60vmin;
        height: 60vmin;
        border-radius: 50%;
        filter: blur(100px);
        opacity: 0.65;
        animation: float 20s infinite linear;
        z-index: -1;
    }

    body::before {
        background: var(--light-gradient-1);
        top: 20%;
        left: 10%;
    }

    body::after {
        background: var(--light-gradient-2);
        bottom: 20%;
        right: 10%;
        animation-delay: -10s;
    }

    @keyframes float {
        0%, 100% { transform: translate(0, 0) rotate(0deg); }
        25% { transform: translate(5vw, -3vh) rotate(90deg); }
        50% { transform: translate(-4vw, 6vh) rotate(180deg); }
        75% { transform: translate(3vw, -5vh) rotate(270deg); }
    }

    /* È°µÈù¢Ê†áÈ¢òÊ†∑Âºè */
    .page-title {
        text-align: center;
        margin: 1rem auto 1rem auto;
        padding-top: 80px;
    }

    .page-title h1 {
        font-family: 'Quicksand', sans-serif;
        color: var(--light-text); 
        font-size: clamp(2rem, 5vw, 2.8rem);
        font-weight: 800;
        letter-spacing: -0.03em;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        background: linear-gradient(135deg, var(--light-gradient-1) 30%, var(--light-gradient-2) 70%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin: 0 auto;
        text-align: center;
    }

    .version-info {
        font-size: 0.9rem;
        color: var(--light-text-muted);
        margin-top: 0.5rem;
    }

    .y_border_radius_txt {
        border-radius: 15px;
        box-shadow: 0px 0px 10px #999999;
        padding: 10px;
    }
    
    :root {
        --primary: #4a90e2;
        --bg: #f5f7fa;
        --border: #e1e4e8;
    }
    
    .coustom-container {
        display: grid;
        grid-gap: 1.5rem;
        max-width: 1200px;
        margin: 0 auto;
        padding-top: 1rem;
    }
    
    .section {
        background: var(--light-card-bg);
        backdrop-filter: blur(15px);
        padding: 1.5rem;
        border-radius: 24px;
        box-shadow: 0 8px 32px var(--light-shadow);
        border: 1px solid var(--light-border); 
    }
    
    h2 {
        margin: 0 0 1rem;
        color: var(--light-text);
        font-size: 1.2rem;
        font-family: 'Quicksand', sans-serif;
        font-weight: 700;
    }
    
    h3 {
        color: var(--light-text);
        font-family: 'Quicksand', sans-serif;
        font-weight: 700;
        margin-bottom: 1rem;
    }
    
    .radio-group {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        margin-bottom: 1rem;
    }
    
    .countries-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }
    
    .countries-container {
        border: 1px solid var(--light-border);
        border-radius: 16px;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 0.5rem;
        max-height: 220px;
        overflow-y: auto;
        padding: 8px;
        background: var(--light-card-bg);
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 16px var(--light-shadow);
    }
    
    .country-item {
        color: var(--light-text);
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem;
        border-radius: 8px;
        transition: background 0.2s;
    }
    
    .country-item:hover {
        background: var(--light-hover);
    }
    
    #regexResult {
        font-family: monospace;
        padding: 1rem;
        background: var(--light-card-bg);
        color: var(--light-text);
        border-radius: 16px;
        word-break: break-all;
        white-space: pre-wrap;
        cursor: pointer;
        box-shadow: 0 4px 16px var(--light-shadow);
        border: 1px solid var(--light-border);
    }
    
    .type-switcher {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
    }
    
    .position-selector {
        margin: 1rem 0;
        padding: 1rem;
        background: var(--light-card-bg);
        border-radius: 16px;
        box-shadow: 0 4px 16px var(--light-shadow);
        border: 1px solid var(--light-border);
    }
    
    input[type="radio"],
    input[type="checkbox"] {
        accent-color: var(--primary);
    }
    
    #validationTip {
        font-size: 0.9em;
        padding: 8px 12px;
        background: rgba(255, 238, 240, 0.8);
        border-radius: 12px;
        margin-top: 8px;
        box-shadow: 0 4px 16px rgba(135, 206, 250, 0.1);
    }
    
    .search-and-buttons {
        margin-bottom: 1rem;
    }
    
    #searchInput {
        width: 100%;
        padding: 0.8rem;
        margin-bottom: 0.8rem;
        border: 1px solid var(--light-border);
        border-radius: 12px;
        background: var(--light-card-bg);
        color: var(--light-text);
        box-shadow: 0 4px 10px var(--light-shadow);
    }
    
    .action-buttons {
        display: flex;
        gap: 0.5rem;
    }
    
    .action-buttons button {
        background: linear-gradient(135deg, var(--light-gradient-1) 30%, var(--light-gradient-2) 70%); 
        color: white;
        border: none;
        padding: 0.8rem 1.5rem;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        margin: 0 0.5rem;
        font-weight: 600;
        outline: none !important;
        transform: translateY(0);
    }

    .action-buttons button:hover,
    .action-buttons button:focus,
    .action-buttons button:active {
        outline: none !important;
        box-shadow: 0 6px 15px rgba(191, 200, 209, 0.274);
        border: none;
        transform: none;
    }
    
    .custom-input-section {
        margin: 1rem 0;
    }
    
    #customInput {
        width: 100%;
        padding: 0.8rem;
        border: 2px solid var(--light-border);
        border-radius: 12px;
        margin-top: 0.5rem;
        font-family: monospace;
        background: var(--light-card-bg);
        color: var(--light-text);
        box-shadow: 0 4px 10px var(--light-shadow);
    }
    
    .input-tip {
        color: var(--light-text-secondary);
        font-size: 0.9em;
        margin-top: 0.5rem;
    }
    
    .match-status {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-top: 0.5rem;
    }
    
    .status-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #ddd;
    }
    
    .status-dot.valid {
        background: #4CAF50;
    }
    
    #allTypesCheckbox {
        margin-left: 1rem;
        accent-color: var(--primary);
    }

    @media (max-width: 768px) {
        .type-switcher {
            flex-direction: column;
            align-items: flex-start;
        }
    }

    @media (max-width: 576px) {
        body {
            padding: 0.5rem;
        }
        
        .section {
            padding: 1rem;
        }
        
        button {
            padding: 0.6rem 1rem;
            margin: 0 0.3rem;
            font-size: 0.9rem;
        }
    }

    body[data-theme="dark"] h2,
    body[data-theme="dark"] h3 {
        color: var(--dark-text);
    }

    body[data-theme="dark"] .country-item {
        color: var(--dark-text);
    }

    body[data-theme="dark"] .countries-container {
        background: var(--dark-card-bg);
        border-color: var(--dark-border);
        box-shadow: 0 4px 16px var(--dark-shadow);
    }

    body[data-theme="dark"] .country-item:hover {
        background: var(--dark-hover);
    }

    body[data-theme="dark"] #regexResult {
        background: var(--dark-card-bg);
        color: var(--dark-text);
        border-color: var(--dark-border);
        box-shadow: 0 4px 16px var(--dark-shadow);
    }

    body[data-theme="dark"] .position-selector {
        background: var(--dark-card-bg);
        border-color: var(--dark-border);
        box-shadow: 0 4px 16px var(--dark-shadow);
    }

    body[data-theme="dark"] #searchInput {
        background: var(--dark-card-bg);
        border-color: var(--dark-border);
        color: var(--dark-text);
        box-shadow: 0 4px 10px var(--dark-shadow);
    }

    body[data-theme="dark"] #customInput {
        background: var(--dark-card-bg);
        border-color: var(--dark-border);
        color: var(--dark-text);
        box-shadow: 0 4px 10px var(--dark-shadow);
    }

    /* ËæìÂÖ•Ê°ÜÁÑ¶ÁÇπÁä∂ÊÄÅ */
    #searchInput:focus,
    #customInput:focus {
        outline: none;
        border-color: var(--light-link);
        box-shadow: 0 0 0 2px rgba(135, 206, 250, 0.2);
    }

    body[data-theme="dark"] #searchInput:focus,
    body[data-theme="dark"] #customInput:focus {
        border-color: var(--dark-link);
        box-shadow: 0 0 0 2px rgba(135, 206, 250, 0.1);
    }

    body[data-theme="dark"] .action-buttons button {
        background: var(--dark-card-bg);
        color: var(--dark-text);
        border: 1px solid var(--dark-border);
    }

    body[data-theme="dark"] .action-buttons button:hover,
    body[data-theme="dark"] .action-buttons button:focus,
    body[data-theme="dark"] .action-buttons button:active {
        background: rgba(255, 255, 255, 0.1);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
    }
</style>
</head>
<body>
    <!-- ÂØºÂÖ•ÂØºËà™Ê†è -->
    <div id="navbar-container"></div>

    <!-- È°µÈù¢Ê†áÈ¢ò -->
    <div class="page-title">
        <h1>Regular Expression Generator</h1>
        <div class="version-info">Version: 1.0.0    By: YoungYannick</div>
    </div>

    <div id="article-meta-container" style="position: relative; z-index: 999999;"></div>

    <div class="container coustom-container">
        <!-- ÈÄâÈ°πÂå∫ -->
        <div class="section">
            <h2>Options</h2>
            <div class="radio-group">
                <label>
                    <input type="radio" name="logic" value="AND"> AND
                </label>
                <label>
                    <input type="radio" name="logic" value="OR" checked> OR
                </label>
                <label>
                    <input type="radio" name="logic" value="NOT"> NOT
                </label>
                <label>
                    <input type="radio" name="logic" value="XOR"> XOR
                </label>
            </div>
            <div class="position-selector">
                <h3>Match Position</h3>
                <div class="radio-group">
                    <label>
                        <input type="radio" name="position" value="start" checked> Starts with
                    </label>
                    <label>
                        <input type="radio" name="position" value="contains"> Contains
                    </label>
                    <label>
                        <input type="radio" name="position" value="end"> Ends with
                    </label>
                </div>
            </div>
            <div class="countries-header">
                <h3>Location Selection</h3>
                <div class="type-switcher">
                    <label><input type="radio" name="displayType" value="zh" checked> Chinese</label>
                    <label><input type="radio" name="displayType" value="name"> English</label>
                    <label><input type="radio" name="displayType" value="code"> Code</label>
                    <label><input type="radio" name="displayType" value="flag"> Flag</label>
                    <label style="margin-left: 1rem;">
                        <input type="checkbox" id="allTypesCheckbox"> Include All
                    </label>
                </div>
            </div>
            <div class="search-and-buttons">
                <input type="text" id="searchInput" placeholder="Search locations...">
                <div class="action-buttons">
                    <button onclick="selectAll()">Select All</button>
                    <button onclick="invertSelection()">Invert</button>
                </div>
            </div>
            <div class="countries-container" id="countriesContainer"></div>
            <div id="validationTip" style="color: #dc3545; margin-top: 0.5rem; display: none;"></div>
            <!-- Ëá™ÂÆö‰πâËæìÂÖ•Ê°Ü -->
            <div class="custom-input-section">
                <h3>Custom Location Input</h3>
                <textarea id="customInput" 
                    placeholder="Enter locations (supports Chinese, English, code or flag, separate with , Ôºå „ÄÅ || \t \n | # $ %)"
                    rows="3"></textarea>
                <div class="input-tip">
                    <span class="match-status">
                        <span class="status-dot"></span>
                        <span>Matched <span id="validCount">0</span>/<span id="totalCount">0</span> items</span>
                    </span>
                </div>
            </div>
            <label style="display: block; margin-top: 1rem;">
                <input type="checkbox" id="unicodeCheckbox"> Use Unicode Escape
            </label>
        </div>
        <!-- ÁªìÊûúÂå∫ -->
        <div class="section">
            <h2>Generated Regular Expression</h2>
            <div id="regexResult" onclick="copy(this)"></div>
        </div>
    </div>

    <!-- Ê∑ªÂä†Â∫ïÈÉ® Footer -->
    <div id="footer-container"></div>

<script>
    $(document).ready(function () {
        // Âä†ËΩΩÂØºËà™Ê†è
        $("#navbar-container").load("/Tools/navbar.html", function() {
            // ÂØºËà™Ê†èÂä†ËΩΩÂÆåÊàêÂêéËÆæÁΩÆÊ†áÈ¢ò
            $("#navbar-title").text("Regex Generator");
            // ÂØºËà™Ê†èÂä†ËΩΩÂÆåÊàêÂêéÊâãÂä®Ëß¶ÂèëÊªöÂä®‰∫ã‰ª∂ÔºåÁ°Æ‰øùÂØºËà™Ê†èÁä∂ÊÄÅÊ≠£Á°Æ
            window.dispatchEvent(new Event('scroll'));
        });
        // Âä†ËΩΩÊñáÁ´†ÂÖÉÊï∞ÊçÆ
        $("#article-meta-container").load("/Tools/article-meta.html", function() {
            // ËÆæÁΩÆÊó•Êúü
            $('.am-container').attr({
                'data-publish-date': '2025-04-13 10:01:12',
                'data-update-date': '2025-04-16 15:18:30'
            });
            // ÊâãÂä®Ëß¶ÂèëÂàùÂßãÂåñ
            if (typeof initArticleMeta === 'function') {
                initArticleMeta();
            }
        });
        // Âä†ËΩΩÂ∫ïÈÉ®
        $("#footer-container").load("/Tools/footer.html");
        
        // ÂàùÂßãÂåñÈ°µÈù¢
        initCountries();
        updateCountryDisplay();
        
        // Ê∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨
        document.getElementById('searchInput').addEventListener('input', handleSearch);
        document.querySelectorAll('input[name="displayType"]').forEach(radio => {
            radio.addEventListener('change', updateCountryDisplay);
        });
        document.getElementById('customInput').addEventListener('input', processCustomInput);
        
        // Ê∑ªÂä†ÈÄªËæëÂíå‰ΩçÁΩÆÈÄâÊã©ÁöÑ‰∫ã‰ª∂ÁõëÂê¨
        document.querySelectorAll('input[name="logic"], input[name="position"], #unicodeCheckbox').forEach(input => {
            input.addEventListener('change', generateRegex);
        });
    });

    const countries = [
        { name: 'China', code: 'CN', flag: 'üá®üá≥', zh: '‰∏≠ÂõΩ' },
        { name: 'Hong Kong', code: 'HK', flag: 'üá≠üá∞', zh: 'È¶ôÊ∏Ø' },
        { name: 'Taiwan', code: 'TW', flag: 'üáπüáº', zh: 'Âè∞Êπæ' },
        { name: 'Singapore', code: 'SG', flag: 'üá∏üá¨', zh: 'Êñ∞Âä†Âù°' },
        { name: 'United States', code: 'US', flag: 'üá∫üá∏', zh: 'ÁæéÂõΩ' },
        { name: 'Japan', code: 'JP', flag: 'üáØüáµ', zh: 'Êó•Êú¨' },
        { name: 'South Korea', code: 'KR', flag: 'üá∞üá∑', zh: 'Èü©ÂõΩ' },
        { name: 'Afghanistan', code: 'AF', flag: 'üá¶üá´', zh: 'ÈòøÂØåÊ±ó' },
        { name: 'Albania', code: 'AL', flag: 'üá¶üá±', zh: 'ÈòøÂ∞îÂ∑¥Â∞º‰∫ö' },
        { name: 'Algeria', code: 'DZ', flag: 'üá©üáø', zh: 'ÈòøÂ∞îÂèäÂà©‰∫ö' },
        { name: 'Andorra', code: 'AD', flag: 'üá¶üá©', zh: 'ÂÆâÈÅìÂ∞î' },
        { name: 'Angola', code: 'AO', flag: 'üá¶üá¥', zh: 'ÂÆâÂì•Êãâ' },
        { name: 'Antigua and Barbuda', code: 'AG', flag: 'üá¶üá¨', zh: 'ÂÆâÊèêÁìúÂíåÂ∑¥Â∏ÉËææ' },
        { name: 'Argentina', code: 'AR', flag: 'üá¶üá∑', zh: 'ÈòøÊ†πÂª∑' },
        { name: 'Armenia', code: 'AM', flag: 'üá¶üá≤', zh: '‰∫öÁæéÂ∞º‰∫ö' },
        { name: 'Australia', code: 'AU', flag: 'üá¶üá∫', zh: 'Êæ≥Â§ßÂà©‰∫ö' },
        { name: 'Austria', code: 'AT', flag: 'üá¶üáπ', zh: 'Â••Âú∞Âà©' },
        { name: 'Azerbaijan', code: 'AZ', flag: 'üá¶üáø', zh: 'ÈòøÂ°ûÊãúÁñÜ' },
        { name: 'Bahamas', code: 'BS', flag: 'üáßüá∏', zh: 'Â∑¥ÂìàÈ©¨' },
        { name: 'Bahrain', code: 'BH', flag: 'üáßüá≠', zh: 'Â∑¥Êûó' },
        { name: 'Bangladesh', code: 'BD', flag: 'üáßüá©', zh: 'Â≠üÂä†ÊãâÂõΩ' },
        { name: 'Barbados', code: 'BB', flag: 'üáßüáß', zh: 'Â∑¥Â∑¥Â§öÊñØ' },
        { name: 'Belarus', code: 'BY', flag: 'üáßüáæ', zh: 'ÁôΩ‰øÑÁΩóÊñØ' },
        { name: 'Belgium', code: 'BE', flag: 'üáßüá™', zh: 'ÊØîÂà©Êó∂' },
        { name: 'Belize', code: 'BZ', flag: 'üáßüáø', zh: '‰ºØÂà©ÂÖπ' },
        { name: 'Benin', code: 'BJ', flag: 'üáßüáØ', zh: 'Ë¥ùÂÆÅ' },
        { name: 'Bhutan', code: 'BT', flag: 'üáßüáπ', zh: '‰∏ç‰∏π' },
        { name: 'Bolivia', code: 'BO', flag: 'üáßüá¥', zh: 'ÁéªÂà©Áª¥‰∫ö' },
        { name: 'Bosnia and Herzegovina', code: 'BA', flag: 'üáßüá¶', zh: 'Ê≥¢ÊñØÂ∞º‰∫öÂíåÈªëÂ°ûÂì•Áª¥ÈÇ£' },
        { name: 'Botswana', code: 'BW', flag: 'üáßüáº', zh: 'ÂçöËå®Áì¶Á∫≥' },
        { name: 'Brazil', code: 'BR', flag: 'üáßüá∑', zh: 'Â∑¥Ë•ø' },
        { name: 'Brunei', code: 'BN', flag: 'üáßüá≥', zh: 'ÊñáËé±' },
        { name: 'Bulgaria', code: 'BG', flag: 'üáßüá¨', zh: '‰øùÂä†Âà©‰∫ö' },
        { name: 'Burkina Faso', code: 'BF', flag: 'üáßüá´', zh: 'Â∏ÉÂü∫Á∫≥Ê≥ïÁ¥¢' },
        { name: 'Burundi', code: 'BI', flag: 'üáßüáÆ', zh: 'Â∏ÉÈöÜËø™' },
        { name: 'Cabo Verde', code: 'CV', flag: 'üá®üáª', zh: '‰ΩõÂæóËßí' },
        { name: 'Cambodia', code: 'KH', flag: 'üá∞üá≠', zh: 'Êü¨ÂüîÂØ®' },
        { name: 'Cameroon', code: 'CM', flag: 'üá®üá≤', zh: 'ÂñÄÈ∫¶ÈöÜ' },
        { name: 'Canada', code: 'CA', flag: 'üá®üá¶', zh: 'Âä†ÊãøÂ§ß' },
        { name: 'Central African Republic', code: 'CF', flag: 'üá®üá´', zh: '‰∏≠ÈùûÂÖ±ÂíåÂõΩ' },
        { name: 'Chad', code: 'TD', flag: 'üáπüá©', zh: '‰πçÂæó' },
        { name: 'Chile', code: 'CL', flag: 'üá®üá±', zh: 'Êô∫Âà©' },
        { name: 'Colombia', code: 'CO', flag: 'üá®üá¥', zh: 'Âì•‰º¶ÊØî‰∫ö' },
        { name: 'Comoros', code: 'KM', flag: 'üá∞üá≤', zh: 'ÁßëÊë©ÁΩó' },
        { name: 'Congo (Congo-Brazzaville)', code: 'CG', flag: 'üá®üá¨', zh: 'ÂàöÊûúÔºàÂ∏ÉÔºâ' },
        { name: 'Congo (Congo-Kinshasa)', code: 'CD', flag: 'üá®üá©', zh: 'ÂàöÊûúÔºàÈáëÔºâ' },
        { name: 'Costa Rica', code: 'CR', flag: 'üá®üá∑', zh: 'Âì•ÊñØËææÈªéÂä†' },
        { name: 'Croatia', code: 'HR', flag: 'üá≠üá∑', zh: 'ÂÖãÁΩóÂú∞‰∫ö' },
        { name: 'Cuba', code: 'CU', flag: 'üá®üá∫', zh: 'Âè§Â∑¥' },
        { name: 'Cyprus', code: 'CY', flag: 'üá®üáæ', zh: 'Â°ûÊµ¶Ë∑ØÊñØ' },
        { name: 'Czech Republic', code: 'CZ', flag: 'üá®üáø', zh: 'Êç∑ÂÖã' },
        { name: 'Denmark', code: 'DK', flag: 'üá©üá∞', zh: '‰∏πÈ∫¶' },
        { name: 'Djibouti', code: 'DJ', flag: 'üá©üáØ', zh: 'ÂêâÂ∏ÉÊèê' },
        { name: 'Dominica', code: 'DM', flag: 'üá©üá≤', zh: 'Â§öÁ±≥Â∞ºÂä†' },
        { name: 'Dominican Republic', code: 'DO', flag: 'üá©üá¥', zh: 'Â§öÁ±≥Â∞ºÂä†ÂÖ±ÂíåÂõΩ' },
        { name: 'Ecuador', code: 'EC', flag: 'üá™üá®', zh: 'ÂéÑÁìúÂ§öÂ∞î' },
        { name: 'Egypt', code: 'EG', flag: 'üá™üá¨', zh: 'ÂüÉÂèä' },
        { name: 'El Salvador', code: 'SV', flag: 'üá∏üáª', zh: 'Ëê®Â∞îÁì¶Â§ö' },
        { name: 'Equatorial Guinea', code: 'GQ', flag: 'üá¨üá∂', zh: 'Ëµ§ÈÅìÂá†ÂÜÖ‰∫ö' },
        { name: 'Eritrea', code: 'ER', flag: 'üá™üá∑', zh: 'ÂéÑÁ´ãÁâπÈáå‰∫ö' },
        { name: 'Estonia', code: 'EE', flag: 'üá™üá™', zh: 'Áà±Ê≤ôÂ∞º‰∫ö' },
        { name: 'Eswatini', code: 'SZ', flag: 'üá∏üáø', zh: 'ÊñØÂ®ÅÂ£´ÂÖ∞' },
        { name: 'Ethiopia', code: 'ET', flag: 'üá™üáπ', zh: 'ÂüÉÂ°û‰øÑÊØî‰∫ö' },
        { name: 'Fiji', code: 'FJ', flag: 'üá´üáØ', zh: 'ÊñêÊµé' },
        { name: 'Finland', code: 'FI', flag: 'üá´üáÆ', zh: 'Ëä¨ÂÖ∞' },
        { name: 'France', code: 'FR', flag: 'üá´üá∑', zh: 'Ê≥ïÂõΩ' },
        { name: 'Gabon', code: 'GA', flag: 'üá¨üá¶', zh: 'Âä†Ëì¨' },
        { name: 'Gambia', code: 'GM', flag: 'üá¨üá≤', zh: 'ÂÜàÊØî‰∫ö' },
        { name: 'Georgia', code: 'GE', flag: 'üá¨üá™', zh: 'Ê†ºÈ≤ÅÂêâ‰∫ö' },
        { name: 'Germany', code: 'DE', flag: 'üá©üá™', zh: 'Âæ∑ÂõΩ' },
        { name: 'Ghana', code: 'GH', flag: 'üá¨üá≠', zh: 'Âä†Á∫≥' },
        { name: 'Greece', code: 'GR', flag: 'üá¨üá∑', zh: 'Â∏åËÖä' },
        { name: 'Grenada', code: 'GD', flag: 'üá¨üá©', zh: 'Ê†ºÊûóÁ∫≥Ëææ' },
        { name: 'Guatemala', code: 'GT', flag: 'üá¨üáπ', zh: 'Âç±Âú∞È©¨Êãâ' },
        { name: 'Guinea', code: 'GN', flag: 'üá¨üá≥', zh: 'Âá†ÂÜÖ‰∫ö' },
        { name: 'Guinea-Bissau', code: 'GW', flag: 'üá¨üáº', zh: 'Âá†ÂÜÖ‰∫öÊØîÁªç' },
        { name: 'Guyana', code: 'GY', flag: 'üá¨üáæ', zh: 'Âú≠‰∫öÈÇ£' },
        { name: 'Haiti', code: 'HT', flag: 'üá≠üáπ', zh: 'Êµ∑Âú∞' },
        { name: 'Honduras', code: 'HN', flag: 'üá≠üá≥', zh: 'Ê¥™ÈÉΩÊãâÊñØ' },
        { name: 'Hungary', code: 'HU', flag: 'üá≠üá∫', zh: 'ÂåàÁâôÂà©' },
        { name: 'Iceland', code: 'IS', flag: 'üáÆüá∏', zh: 'ÂÜ∞Â≤õ' },
        { name: 'India', code: 'IN', flag: 'üáÆüá≥', zh: 'Âç∞Â∫¶' },
        { name: 'Indonesia', code: 'ID', flag: 'üáÆüá©', zh: 'Âç∞Â∫¶Â∞ºË•ø‰∫ö' },
        { name: 'Iran', code: 'IR', flag: 'üáÆüá∑', zh: '‰ºäÊúó' },
        { name: 'Iraq', code: 'IQ', flag: 'üáÆüá∂', zh: '‰ºäÊãâÂÖã' },
        { name: 'Ireland', code: 'IE', flag: 'üáÆüá™', zh: 'Áà±Â∞îÂÖ∞' },
        { name: 'Israel', code: 'IL', flag: 'üáÆüá±', zh: '‰ª•Ëâ≤Âàó' },
        { name: 'Italy', code: 'IT', flag: 'üáÆüáπ', zh: 'ÊÑèÂ§ßÂà©' },
        { name: 'Jamaica', code: 'JM', flag: 'üáØüá≤', zh: 'Áâô‰π∞Âä†' },
        { name: 'Jordan', code: 'JO', flag: 'üáØüá¥', zh: 'Á∫¶Êó¶' },
        { name: 'Kazakhstan', code: 'KZ', flag: 'üá∞üáø', zh: 'ÂìàËê®ÂÖãÊñØÂù¶' },
        { name: 'Kenya', code: 'KE', flag: 'üá∞üá™', zh: 'ËÇØÂ∞º‰∫ö' },
        { name: 'Kiribati', code: 'KI', flag: 'üá∞üáÆ', zh: 'Âü∫ÈáåÂ∑¥ÊñØ' },
        { name: 'North Korea', code: 'KP', flag: 'üá∞üáµ', zh: 'ÊúùÈ≤ú' },
        { name: 'Kuwait', code: 'KW', flag: 'üá∞üáº', zh: 'ÁßëÂ®ÅÁâπ' },
        { name: 'Kyrgyzstan', code: 'KG', flag: 'üá∞üá¨', zh: 'ÂêâÂ∞îÂêâÊñØÊñØÂù¶' },
        { name: 'Laos', code: 'LA', flag: 'üá±üá¶', zh: 'ËÄÅÊåù' },
        { name: 'Latvia', code: 'LV', flag: 'üá±üáª', zh: 'ÊãâËÑ±Áª¥‰∫ö' },
        { name: 'Lebanon', code: 'LB', flag: 'üá±üáß', zh: 'ÈªéÂ∑¥Â´©' },
        { name: 'Lesotho', code: 'LS', flag: 'üá±üá∏', zh: 'Ëé±Á¥¢Êâò' },
        { name: 'Liberia', code: 'LR', flag: 'üá±üá∑', zh: 'Âà©ÊØîÈáå‰∫ö' },
        { name: 'Libya', code: 'LY', flag: 'üá±üáæ', zh: 'Âà©ÊØî‰∫ö' },
        { name: 'Liechtenstein', code: 'LI', flag: 'üá±üáÆ', zh: 'ÂàóÊîØÊï¶Â£´Áôª' },
        { name: 'Lithuania', code: 'LT', flag: 'üá±üáπ', zh: 'Á´ãÈô∂ÂÆõ' },
        { name: 'Luxembourg', code: 'LU', flag: 'üá±üá∫', zh: 'Âç¢Ê£ÆÂ†°' },
        { name: 'Madagascar', code: 'MG', flag: 'üá≤üá¨', zh: 'È©¨ËææÂä†ÊñØÂä†' },
        { name: 'Malawi', code: 'MW', flag: 'üá≤üáº', zh: 'È©¨ÊãâÁª¥' },
        { name: 'Malaysia', code: 'MY', flag: 'üá≤üáæ', zh: 'È©¨Êù•Ë•ø‰∫ö' },
        { name: 'Maldives', code: 'MV', flag: 'üá≤üáª', zh: 'È©¨Â∞î‰ª£Â§´' },
        { name: 'Mali', code: 'ML', flag: 'üá≤üá±', zh: 'È©¨Èáå' },
        { name: 'Malta', code: 'MT', flag: 'üá≤üáπ', zh: 'È©¨ËÄ≥‰ªñ' },
        { name: 'Marshall Islands', code: 'MH', flag: 'üá≤üá≠', zh: 'È©¨ÁªçÂ∞îÁæ§Â≤õ' },
        { name: 'Mauritania', code: 'MR', flag: 'üá≤üá∑', zh: 'ÊØõÈáåÂ°îÂ∞º‰∫ö' },
        { name: 'Mauritius', code: 'MU', flag: 'üá≤üá∫', zh: 'ÊØõÈáåÊ±ÇÊñØ' },
        { name: 'Mexico', code: 'MX', flag: 'üá≤üáΩ', zh: 'Â¢®Ë•øÂì•' },
        { name: 'Micronesia', code: 'FM', flag: 'üá´üá≤', zh: 'ÂØÜÂÖãÁΩóÂ∞ºË•ø‰∫ö' },
        { name: 'Moldova', code: 'MD', flag: 'üá≤üá©', zh: 'Êë©Â∞îÂ§öÁì¶' },
        { name: 'Monaco', code: 'MC', flag: 'üá≤üá®', zh: 'Êë©Á∫≥Âì•' },
        { name: 'Mongolia', code: 'MN', flag: 'üá≤üá≥', zh: 'ËíôÂè§' },
        { name: 'Montenegro', code: 'ME', flag: 'üá≤üá™', zh: 'ÈªëÂ±±' },
        { name: 'Morocco', code: 'MA', flag: 'üá≤üá¶', zh: 'Êë©Ê¥õÂì•' },
        { name: 'Mozambique', code: 'MZ', flag: 'üá≤üáø', zh: 'Ëé´Ê°ëÊØîÂÖã' },
        { name: 'Myanmar (Burma)', code: 'MM', flag: 'üá≤üá≤', zh: 'ÁºÖÁî∏' },
        { name: 'Namibia', code: 'NA', flag: 'üá≥üá¶', zh: 'Á∫≥Á±≥ÊØî‰∫ö' },
        { name: 'Nauru', code: 'NR', flag: 'üá≥üá∑', zh: 'ÁëôÈ≤Å' },
        { name: 'Nepal', code: 'NP', flag: 'üá≥üáµ', zh: 'Â∞ºÊ≥äÂ∞î' },
        { name: 'Netherlands', code: 'NL', flag: 'üá≥üá±', zh: 'Ëç∑ÂÖ∞' },
        { name: 'New Zealand', code: 'NZ', flag: 'üá≥üáø', zh: 'Êñ∞Ë•øÂÖ∞' },
        { name: 'Nicaragua', code: 'NI', flag: 'üá≥üáÆ', zh: 'Â∞ºÂä†ÊãâÁìú' },
        { name: 'Niger', code: 'NE', flag: 'üá≥üá™', zh: 'Â∞ºÊó•Â∞î' },
        { name: 'Nigeria', code: 'NG', flag: 'üá≥üá¨', zh: 'Â∞ºÊó•Âà©‰∫ö' },
        { name: 'North Macedonia', code: 'MK', flag: 'üá≤üá∞', zh: 'ÂåóÈ©¨ÂÖ∂È°ø' },
        { name: 'Norway', code: 'NO', flag: 'üá≥üá¥', zh: 'Êå™Â®Å' },
        { name: 'Oman', code: 'OM', flag: 'üá¥üá≤', zh: 'ÈòøÊõº' },
        { name: 'Pakistan', code: 'PK', flag: 'üáµüá∞', zh: 'Â∑¥Âü∫ÊñØÂù¶' },
        { name: 'Palau', code: 'PW', flag: 'üáµüáº', zh: 'Â∏ïÂä≥' },
        { name: 'Panama', code: 'PA', flag: 'üáµüá¶', zh: 'Â∑¥ÊãøÈ©¨' },
        { name: 'Papua New Guinea', code: 'PG', flag: 'üáµüá¨', zh: 'Â∑¥Â∏É‰∫öÊñ∞Âá†ÂÜÖ‰∫ö' },
        { name: 'Paraguay', code: 'PY', flag: 'üáµüáæ', zh: 'Â∑¥ÊãâÂú≠' },
        { name: 'Peru', code: 'PE', flag: 'üáµüá™', zh: 'ÁßòÈ≤Å' },
        { name: 'Philippines', code: 'PH', flag: 'üáµüá≠', zh: 'Ëè≤ÂæãÂÆæ' },
        { name: 'Poland', code: 'PL', flag: 'üáµüá±', zh: 'Ê≥¢ÂÖ∞' },
        { name: 'Portugal', code: 'PT', flag: 'üáµüáπ', zh: 'Ëë°ËêÑÁâô' },
        { name: 'Qatar', code: 'QA', flag: 'üá∂üá¶', zh: 'Âç°Â°îÂ∞î' },
        { name: 'Romania', code: 'RO', flag: 'üá∑üá¥', zh: 'ÁΩóÈ©¨Â∞º‰∫ö' },
        { name: 'Russia', code: 'RU', flag: 'üá∑üá∫', zh: '‰øÑÁΩóÊñØ' },
        { name: 'Rwanda', code: 'RW', flag: 'üá∑üáº', zh: 'Âç¢Êó∫Ëææ' },
        { name: 'Saint Kitts and Nevis', code: 'KN', flag: 'üá∞üá≥', zh: 'Âú£Âü∫Ëå®ÂíåÂ∞ºÁª¥ÊñØ' },
        { name: 'Saint Lucia', code: 'LC', flag: 'üá±üá®', zh: 'Âú£Âç¢Ë•ø‰∫ö' },
        { name: 'Saint Vincent and the Grenadines', code: 'VC', flag: 'üáªüá®', zh: 'Âú£ÊñáÊ£ÆÁâπÂíåÊ†ºÊûóÁ∫≥‰∏ÅÊñØ' },
        { name: 'Samoa', code: 'WS', flag: 'üáºüá∏', zh: 'Ëê®Êë©‰∫ö' },
        { name: 'San Marino', code: 'SM', flag: 'üá∏üá≤', zh: 'Âú£È©¨ÂäõËØ∫' },
        { name: 'Sao Tome and Principe', code: 'ST', flag: 'üá∏üáπ', zh: 'Âú£Â§öÁæéÂíåÊôÆÊûóË•øÊØî' },
        { name: 'Saudi Arabia', code: 'SA', flag: 'üá∏üá¶', zh: 'Ê≤ôÁâπÈòøÊãâ‰ºØ' },
        { name: 'Senegal', code: 'SN', flag: 'üá∏üá≥', zh: 'Â°ûÂÜÖÂä†Â∞î' },
        { name: 'Serbia', code: 'RS', flag: 'üá∑üá∏', zh: 'Â°ûÂ∞îÁª¥‰∫ö' },
        { name: 'Seychelles', code: 'SC', flag: 'üá∏üá®', zh: 'Â°ûËàåÂ∞î' },
        { name: 'Sierra Leone', code: 'SL', flag: 'üá∏üá±', zh: 'Â°ûÊãâÂà©ÊòÇ' },
        { name: 'Slovakia', code: 'SK', flag: 'üá∏üá∞', zh: 'ÊñØÊ¥õ‰ºêÂÖã' },
        { name: 'Slovenia', code: 'SI', flag: 'üá∏üáÆ', zh: 'ÊñØÊ¥õÊñáÂ∞º‰∫ö' },
        { name: 'Solomon Islands', code: 'SB', flag: 'üá∏üáß', zh: 'ÊâÄÁΩóÈó®Áæ§Â≤õ' },
        { name: 'Somalia', code: 'SO', flag: 'üá∏üá¥', zh: 'Á¥¢È©¨Èáå' },
        { name: 'South Africa', code: 'ZA', flag: 'üáøüá¶', zh: 'ÂçóÈùû' },
        { name: 'South Sudan', code: 'SS', flag: 'üá∏üá∏', zh: 'ÂçóËãè‰∏π' },
        { name: 'Spain', code: 'ES', flag: 'üá™üá∏', zh: 'Ë•øÁè≠Áâô' },
        { name: 'Sri Lanka', code: 'LK', flag: 'üá±üá∞', zh: 'ÊñØÈáåÂÖ∞Âç°' },
        { name: 'Sudan', code: 'SD', flag: 'üá∏üá©', zh: 'Ëãè‰∏π' },
        { name: 'Suriname', code: 'SR', flag: 'üá∏üá∑', zh: 'ËãèÈáåÂçó' },
        { name: 'Sweden', code: 'SE', flag: 'üá∏üá™', zh: 'ÁëûÂÖ∏' },
        { name: 'Switzerland', code: 'CH', flag: 'üá®üá≠', zh: 'ÁëûÂ£´' },
        { name: 'Syria', code: 'SY', flag: 'üá∏üáæ', zh: 'ÂèôÂà©‰∫ö' },
        { name: 'Tajikistan', code: 'TJ', flag: 'üáπüáØ', zh: 'Â°îÂêâÂÖãÊñØÂù¶' },
        { name: 'Tanzania', code: 'TZ', flag: 'üáπüáø', zh: 'Âù¶Ê°ëÂ∞º‰∫ö' },
        { name: 'Thailand', code: 'TH', flag: 'üáπüá≠', zh: 'Ê≥∞ÂõΩ' },
        { name: 'Timor-Leste', code: 'TL', flag: 'üáπüá±', zh: '‰∏úÂ∏ùÊ±∂' },
        { name: 'Togo', code: 'TG', flag: 'üáπüá¨', zh: 'Â§öÂì•' },
        { name: 'Tonga', code: 'TO', flag: 'üáπüá¥', zh: 'Ê±§Âä†' },
        { name: 'Trinidad and Tobago', code: 'TT', flag: 'üáπüáπ', zh: 'ÁâπÁ´ãÂ∞ºËææÂíåÂ§öÂ∑¥Âì•' },
        { name: 'Tunisia', code: 'TN', flag: 'üáπüá≥', zh: 'Á™ÅÂ∞ºÊñØ' },
        { name: 'Turkey', code: 'TR', flag: 'üáπüá∑', zh: 'ÂúüËÄ≥ÂÖ∂' },
        { name: 'Turkmenistan', code: 'TM', flag: 'üáπüá≤', zh: 'ÂúüÂ∫ìÊõºÊñØÂù¶' },
        { name: 'Tuvalu', code: 'TV', flag: 'üáπüáª', zh: 'ÂõæÁì¶Âç¢' },
        { name: 'Uganda', code: 'UG', flag: 'üá∫üá¨', zh: '‰πåÂπ≤Ëææ' },
        { name: 'Ukraine', code: 'UA', flag: 'üá∫üá¶', zh: '‰πåÂÖãÂÖ∞' },
        { name: 'United Arab Emirates', code: 'AE', flag: 'üá¶üá™', zh: 'ÈòøËÅîÈÖã' },
        { name: 'United Kingdom', code: 'GB', flag: 'üá¨üáß', zh: 'Ëã±ÂõΩ' },
        { name: 'Uruguay', code: 'UY', flag: 'üá∫üáæ', zh: '‰πåÊãâÂú≠' },
        { name: 'Uzbekistan', code: 'UZ', flag: 'üá∫üáø', zh: '‰πåÂÖπÂà´ÂÖãÊñØÂù¶' },
        { name: 'Vanuatu', code: 'VU', flag: 'üáªüá∫', zh: 'Áì¶Âä™ÈòøÂõæ' },
        { name: 'Vatican City', code: 'VA', flag: 'üáªüá¶', zh: 'Ê¢µËíÇÂÜà' },
        { name: 'Venezuela', code: 'VE', flag: 'üáªüá™', zh: 'ÂßîÂÜÖÁëûÊãâ' },
        { name: 'Vietnam', code: 'VN', flag: 'üáªüá≥', zh: 'Ë∂äÂçó' },
        { name: 'Yemen', code: 'YE', flag: 'üáæüá™', zh: '‰πüÈó®' },
        { name: 'Zambia', code: 'ZM', flag: 'üáøüá≤', zh: 'ËµûÊØî‰∫ö' },
        { name: 'Zimbabwe', code: 'ZW', flag: 'üáøüáº', zh: 'Ê¥•Â∑¥Â∏ÉÈü¶' }
    ];

    // ÂàùÂßãÂåñ‰ΩçÁΩÆÈÄâÊã©
    function initCountries() {
        const container = document.getElementById('countriesContainer');
        countries.forEach(country => {
            const label = document.createElement('label');
            // Ê∑ªÂä†ÊêúÁ¥¢Êï∞ÊçÆÂ±ûÊÄß
            label.dataset.search = `${country.zh} ${country.name} ${country.code} ${country.flag}`.toLowerCase();
            label.className = 'country-item';
            label.innerHTML = `
                <input type="checkbox" class="country-checkbox"
                    data-name="${country.name}"
                    data-code="${country.code}"
                    data-flag="${country.flag}"
                    data-zh="${country.zh}">
                <span class="country-label">${country.name}</span>
            `;
            container.appendChild(label);
        });
    }
    // Êñ∞Â¢ûÊêúÁ¥¢ÂäüËÉΩ
    function handleSearch() {
        const keyword = document.getElementById('searchInput').value.trim().toLowerCase();
        document.querySelectorAll('.country-item').forEach(item => {
            const shouldShow = item.dataset.search.includes(keyword);
            item.style.display = shouldShow ? 'flex' : 'none';
        });
    }
    // Êñ∞Â¢ûÂÖ®ÈÄâÂäüËÉΩ
    function selectAll() {
        document.querySelectorAll('.country-item:not([style*="display: none"]) .country-checkbox').forEach(checkbox => {
            checkbox.checked = true;
        });
        generateRegex();
    }
    // Êñ∞Â¢ûÂèçÈÄâÂäüËÉΩ
    function invertSelection() {
        document.querySelectorAll('.country-item:not([style*="display: none"]) .country-checkbox').forEach(checkbox => {
            checkbox.checked = !checkbox.checked;
        });
        generateRegex();
    }
    // Êõ¥Êñ∞‰ΩçÁΩÆÊòæÁ§∫ÊñπÂºè
    function updateCountryDisplay() {
        const displayType = document.querySelector('input[name="displayType"]:checked').value;
        document.querySelectorAll('.country-item').forEach((item) => {
            const checkbox = item.querySelector('.country-checkbox');
            const label = item.querySelector('.country-label');
            if (checkbox && label) {
                label.textContent = checkbox.dataset[displayType];
            }
        });
    }

    // UnicodeËΩ¨‰πâÂ§ÑÁêÜ
    function toUnicodeEscape(str) {
        let result = '';
        for (let i = 0; i < str.length; i++) {
            const code = str.codePointAt(i);
            if (code > 0xFFFF) {
                // Â§ÑÁêÜËæÖÂä©Âπ≥Èù¢Â≠óÁ¨¶ÔºàËΩ¨Êç¢‰∏∫‰ª£ÁêÜÂØπÔºâ
                const high = Math.floor((code - 0x10000) / 0x400) + 0xD800;
                const low = (code - 0x10000) % 0x400 + 0xDC00;
                result += '\\u' + high.toString(16).padStart(4, '0') 
                        + '\\u' + low.toString(16).padStart(4, '0');
                i++; // Ë∑≥Ëøá‰ª£ÁêÜÂØπÁöÑÁ¨¨‰∫å‰∏™Á†ÅÂÖÉ
            } else {
                // Âü∫Êú¨Â§öÊñáÁßçÂπ≥Èù¢Â≠óÁ¨¶
                result += '\\u' + code.toString(16).padStart(4, '0');
            }
        }
        return result;
    }
    // ÂõΩÂÆ∂ÂèçÂêëÊò†Â∞ÑË°®ÔºàÁî®‰∫éÂø´ÈÄüÊü•ÊâæÔºâ
    const countryMaps = {
        zh: new Map(countries.map(c => [c.zh, c])),
        name: new Map(countries.map(c => [c.name, c])),
        code: new Map(countries.map(c => [c.code, c])),
        flag: new Map(countries.map(c => [c.flag, c]))
    };
    // Ëá™ÂÆö‰πâËæìÂÖ•Â§ÑÁêÜ
    function processCustomInput() {
        const input = document.getElementById('customInput').value;
        const displayType = document.querySelector('input[name="displayType"]:checked').value;
        const items = input.split(/[,Ôºå„ÄÅ||\t\n|#$%]/g).map(s => s.trim()).filter(Boolean);
        let validCount = 0;
        const customValues = [];
        items.forEach(item => {
            const includeAll = document.getElementById('allTypesCheckbox').checked;
            if(includeAll) {
                // ÂåπÈÖçÊâÄÊúâÁ±ªÂûã
                const matchedCountry = 
                    countryMaps.zh.get(item) ||
                    countryMaps.name.get(item) ||
                    countryMaps.code.get(item) ||
                    countryMaps.flag.get(item);
                
                if(matchedCountry) {
                    validCount++;
                    // Ê∑ªÂä†ÊâÄÊúâÂõõ‰∏™Á±ªÂûãÁöÑÂÄº
                    customValues.push(
                        matchedCountry.zh,
                        matchedCountry.name,
                        matchedCountry.code,
                        matchedCountry.flag
                    );
                }else {
                    // Êú™ÂåπÈÖçÁöÑÈÉ®ÂàÜÁõ¥Êé•Ê∑ªÂä†
                    customValues.push(item);
                }
            } else {
                // ÂéüÊúâÂåπÈÖçÈÄªËæë
                const matchedCountry = countryMaps[displayType].get(item);
                if(matchedCountry) {
                    validCount++;
                    customValues.push(matchedCountry[displayType]);
                }else {
                    // Êú™ÂåπÈÖçÁöÑÈÉ®ÂàÜÁõ¥Êé•Ê∑ªÂä†
                    customValues.push(item);
                }
            }
        });
        // Êõ¥Êñ∞Áä∂ÊÄÅÊèêÁ§∫
        document.getElementById('validCount').textContent = validCount;
        document.getElementById('totalCount').textContent = items.length;
        document.querySelector('.status-dot').classList.toggle('valid', validCount === items.length);
        return customValues;
    }
    // ÁîüÊàêÊ≠£ÂàôË°®ËææÂºè
    function generateRegex() {
        const validationTip = document.getElementById('validationTip');
        validationTip.style.display = 'none';
        // Ëé∑ÂèñÂü∫Á°ÄÈÖçÁΩÆ
        const logic = document.querySelector('input[name="logic"]:checked').value;
        const position = document.querySelector('input[name="position"]:checked').value;
        const displayType = document.querySelector('input[name="displayType"]:checked').value;
        const useUnicode = document.getElementById('unicodeCheckbox').checked;
        const includeAll = document.getElementById('allTypesCheckbox').checked;

        // Â§ÑÁêÜÂ§çÈÄâÊ°ÜÈÄâÊã©
        let checkboxValues = [];
        document.querySelectorAll('.country-checkbox:checked').forEach(cb => {
            if(includeAll) {
                // Êî∂ÈõÜÊâÄÊúâÂõõ‰∏™Á±ªÂûãÁöÑÂÄº
                checkboxValues.push(
                    cb.dataset.zh,
                    cb.dataset.name,
                    cb.dataset.code,
                    cb.dataset.flag
                );
            } else {
                // ‰ªÖÊî∂ÈõÜÂΩìÂâçÊòæÁ§∫Á±ªÂûã
                checkboxValues.push(cb.dataset[displayType]);
            }
        });
        // ÂéªÈáçÂ§ÑÁêÜ
        checkboxValues = [...new Set(checkboxValues)];

        // Ëé∑ÂèñÊâÄÊúâÊúâÊïàÂÄºÔºàÂåÖÊã¨Â§çÈÄâÊ°ÜÂíåËá™ÂÆö‰πâËæìÂÖ•Ôºâ
        const getProcessedValues = (values) => {
            return values.map(value => {
                return useUnicode 
                    ? toUnicodeEscape(value)
                    : value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
            });
        };
        // Â§ÑÁêÜËá™ÂÆö‰πâËæìÂÖ•ÔºàÂåÖÂê´Ëá™Âä®ÂåπÈÖçÂíåÂéüÂßãËæìÂÖ•Ôºâ
        const customValues = processCustomInput(); 
        // ÂêàÂπ∂Âπ∂Â§ÑÁêÜÊâÄÊúâÂÄº
        const allValues = getProcessedValues([...checkboxValues, ...customValues]);
        const totalSelected = allValues.length;
        // È™åËØÅÈÄªËæë
        if (['OR', 'XOR'].includes(logic)) {
            const minRequire = logic === 'XOR' ? 2 : 1;
            if (totalSelected < minRequire) {
                validationTip.textContent = `‚ö†Ô∏è ${logic} logic requires at least ${minRequire} elements to be selected`;
                validationTip.style.display = 'block';
                document.getElementById('regexResult').textContent = '';
                return;
            }
            if (logic === 'XOR' && totalSelected > 2) {
                validationTip.textContent = '‚ö†Ô∏è XOR logic selects at most 2 elements';
                validationTip.style.display = 'block';
                document.getElementById('regexResult').textContent = '';
                return;
            }
        }
        // Á©∫ÂÄºÂ§ÑÁêÜ
        if (totalSelected === 0) {
            document.getElementById('regexResult').textContent = '^$';
            return;
        }
        // Ê†∏ÂøÉÊ®°ÂºèÁîüÊàê
        let pattern = '';
        switch(logic) {
            case 'AND':
                pattern = allValues.join(position === 'contains' ? '.*' : '');
                break;
            case 'OR':
                pattern = allValues.join('|');
                break;
            case 'NOT':
                pattern = allValues.join('|');
                break;
            case 'XOR':
                if (allValues.length === 2) {
                    pattern = `(${allValues[0]}${allValues[1]}|${allValues[1]}${allValues[0]})`;
                }
                break;
        }
        // ‰ΩçÁΩÆÂ§ÑÁêÜ
        let regex = '';
        switch(position) {
            case 'start':
                regex = logic === 'NOT' 
                    ? `^(?!.*?${pattern})` 
                    : `^${pattern}`;
                break;
            case 'end':
                regex = logic === 'NOT' 
                    ? `(?<!${pattern})$` 
                    : `${pattern}$`;
                break;
            case 'contains':
                if (logic === 'AND') {
                    const lookaheads = allValues.map(v => `(?=.*${v})`).join('');
                    regex = `^${lookaheads}.*$`;
                } else if (logic === 'NOT') {
                    regex = `^(?!.*?(?:${pattern})).*$`;
                } else {
                    regex = `.*${pattern}.*`;
                }
                break;
        }
        // ËæπÁïå‰øÆÊ≠£
        if (!regex.startsWith('^') && position !== 'end') {
            regex = `^${regex}`;
        }
        if (!regex.endsWith('$') && position !== 'start') {
            regex += `$`;
        }
        // ÊòæÁ§∫ÁªìÊûú
        document.getElementById('regexResult').textContent = regex;
    }
    function copy(that) {
        // ÂàõÂª∫‰∏Ä‰∏™‰∏¥Êó∂ÁöÑËæìÂÖ•Ê°ÜÊù•Â§çÂà∂ÂÜÖÂÆπ
        var tempInput = document.createElement('input');
        document.body.appendChild(tempInput);
        tempInput.value = that.textContent;
        tempInput.select();
        document.execCommand('copy');
        document.body.removeChild(tempInput);
    }
    // ÂàùÂßãÂåñÊó∂ÁªëÂÆöÊêúÁ¥¢‰∫ã‰ª∂
    document.getElementById('searchInput').addEventListener('input', handleSearch);
    // ÂàùÂßãÂåñ
    initCountries();
    updateCountryDisplay();
    // ‰∫ã‰ª∂ÁõëÂê¨
    document.getElementById('customInput').addEventListener('input', () => {
        processCustomInput();
        generateRegex();
    });
    document.addEventListener('change', (e) => {
        if (e.target.matches('input[name="displayType"]')) {
            updateCountryDisplay();
        }
        generateRegex();
    });
    document.querySelectorAll('input[name="logic"]').forEach(radio => {
        radio.addEventListener('change', () => {
            document.getElementById('validationTip').style.display = 'none';
            generateRegex();
        });
    });
    document.querySelectorAll('.country-checkbox, #unicodeCheckbox')
        .forEach(element => {
            element.addEventListener('change', generateRegex);
        });
    document.getElementById('allTypesCheckbox').addEventListener('change', () => {
        includeAll = document.getElementById('allTypesCheckbox').checked; // ÂÆö‰πâÂπ∂Êõ¥Êñ∞includeAllÁöÑÁä∂ÊÄÅ
        // ÂàáÊç¢Êó∂Âº∫Âà∂Êõ¥Êñ∞ÊòæÁ§∫Á±ªÂûã
        updateCountryDisplay();
        generateRegex();
    });
    // ÂàùÂßãÂåñÊó∂Ë∞ÉÁî®
    processCustomInput();
    generateRegex();
</script>
</body>
</html>